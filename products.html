<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Condensed:ital,wght@1,700&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato&family=Roboto&display=swap"
      rel="stylesheet"
    />

    <title>Products</title>
    <link rel="icon" href="media/tab-icon.png" />
  </head>

  <body>
    <ul class="nav-bar">
      <li id="nav-bar-title-container">
        <a id="nav-bar-title-text" href="index.html">Stealth Solutions</a>
      </li>
      <li><a href="products.html">Products</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="news.html">News</a></li>
      <li><a href="about_us.html">About Us</a></li>
      <li><a href="contact_us.html">Contact Us</a></li>
      <li><a href="reviews.html">Reviews</a></li>
    </ul>

    <h1>Products</h1>
    <h2>
      Browse our supply of first-class products for everything stealth related
    </h2>
    <div class="all-products-container" id="main-product-container"></div>

    <footer>
      <ul>
        <li>Contact Us</li>
        <li>
          <a href="https://twitter.com" target="_blank" class="social-icon"
            ><img src="media/twitter-icon.png" alt="twitter icon"
          /></a>
        </li>
        <li>
          <a href="https://instagram.com" target="_blank" class="social-icon"
            ><img src="media/instagram-icon.png" alt="instagram icon"
          /></a>
        </li>
        <li>
          <a href="https://facebook.com" target="_blank" class="social-icon"
            ><img src="media/facebook-icon.png" alt="facebook icon"
          /></a>
        </li>
      </ul>
    </footer>

    <script>
      "use strict";

      // builds html code for a given product
      function buildProductHTML(product) {
        let element = "";
        element += '<div class="product-container" ';
        element += 'id="' + product.name.replaceAll(" ", "-") + '">';
        element += '<img src="' + product.img_src + '" />';
        element += '<div class="product-text">';
        element += "<strong>" + product.name + "</strong><br />";
        element += product.description + "<br />";
        element += "<em>" + product.category + "</em>";
        element += "</div></div>";
        return element;
      }

      $(document).ready(function () {
        let categoryDict = {};
        $.get("products.json", function (data) {
          let products = data.products;

          // display product list on the page
          products.forEach(function (product) {
            if (!(product.category in categoryDict)) {
              // make a key if the key does not exist
              categoryDict[product.category] = [];
            }

            categoryDict[product.category].push(product.name);
            $("#main-product-container").append(buildProductHTML(product));
          });
        });

        // might have to delete this feature for time purposes
        // access dictionary once the get request is complete
        $.get("products.json").done(function () {
          console.log(categoryDict);
        });
      });
    </script>
  </body>
</html>
